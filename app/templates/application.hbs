{{labs-site-header}}
<div class="site-main grid-x">

  <div class="search-container">
  </div>

  <div class="map-container cell medium-auto large-order-2">
    {{#labs-map
      id='main-map'
      initOptions=initMapOptions
      mapLoaded=(action 'handleMapLoad') as |map|}}
      {{#map.labs-layers
        model=model
        onLayerClick=(action 'handleLayerClick') as |layers|}}
        {{#layers.tooltip as |tooltip|}}
          {{tooltip.layer.id}}
        {{/layers.tooltip}}
      {{/map.labs-layers}}

      {{#if (not-eq popupFeatures null)}}
        {{#map.popup
          lngLat=popupLocation}}
          {{map-popup-content
            features=popupFeatures}}
        {{/map.popup}}
      {{/if}}

      {{map.on 'click' (action 'handleMapClick')}}
      {{map.on 'zoomend' (action 'handleZoomend')}}
      {{map.on 'dragend' (action 'handleDragend')}}
    {{/labs-map}}
  </div>

  <div class="layer-menu cell large-order-1">
    {{!-- City Map Layers --}}
    {{#accordion-menu title='City Map Layers'}}
      {{#lookup-layer-group for='citymap' as |layerGroup|}}
        {{#layer-menu-item
          title=layerGroup.model.title
          active=citymap}}
        {{/layer-menu-item}}
      {{/lookup-layer-group}}

      {{#lookup-layer-group for='street-centerlines' as |layerGroup|}}
        {{#layer-menu-item
          title=layerGroup.model.title
          active=street-centerlines}}
        {{/layer-menu-item}}
      {{/lookup-layer-group}}

      {{#lookup-layer-group for='pierhead-bulkhead-lines' as |layerGroup|}}
        {{#layer-menu-item
          title=layerGroup.model.title
          active=pierhead-bulkhead-lines}}
        {{/layer-menu-item}}
      {{/lookup-layer-group}}

      {{#lookup-layer-group for='arterials' as |layerGroup|}}
        {{#layer-menu-item
          title=layerGroup.model.title
          active=arterials}}
        {{/layer-menu-item}}
      {{/lookup-layer-group}}

      {{#lookup-layer-group for='amendments' as |layerGroup|}}
        {{#layer-menu-item
          title=layerGroup.model.title
          active=amendments}}
        {{/layer-menu-item}}
      {{/lookup-layer-group}}
      {{#lookup-layer-group for='name-changes' as |layerGroup|}}
        {{#layer-menu-item
          title=layerGroup.model.title
          active=name-changes}}
        {{/layer-menu-item}}
      {{/lookup-layer-group}}
    {{/accordion-menu}}

    {{!-- Other Layers --}}
    {{#accordion-menu title='Other Layers' open=false}}
      {{#lookup-layer-group for='zoning-districts' as |layerGroup|}}
        {{#layer-menu-item
          title=layerGroup.model.title
          active=zoning-districts}}
        {{/layer-menu-item}}
      {{/lookup-layer-group}}
    {{/accordion-menu}}
  </div>

  {{outlet}}

</div>
