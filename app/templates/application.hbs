{{labs-site-header}}
<div class="site-main grid-x">

  <div class="search-container">
  </div>

  <div class="map-container cell medium-auto large-order-2">
    {{#labs-map
      id='main-map'
      initOptions=initMapOptions
      mapLoaded=(action 'handleMapLoad') as |map|}}
      {{#map.labs-layers
        model=model
        onLayerClick=(action 'handleLayerClick') as |layers|}}
        {{#layers.tooltip as |tooltip|}}
          {{tooltip.layer.id}}
        {{/layers.tooltip}}
      {{/map.labs-layers}}

      {{#if (not-eq popupFeatures null)}}
        {{#map.popup
          lngLat=popupLocation}}
          {{map-popup-content
            features=popupFeatures}}
        {{/map.popup}}
      {{/if}}

      {{map.on 'click' (action 'handleMapClick')}}
      {{map.on 'zoomend' (action 'handleZoomend')}}
      {{map.on 'dragend' (action 'handleDragend')}}
    {{/labs-map}}
    <a class="zola-map-area-button" href="https://zola.planning.nyc.gov/{{mapLatLngZoomHash}}" target="_blank" rel="noopener">
      <strong>View <span class="show-for-medium">this area</span> in ZoLa</strong>
      <small class="show-for-medium">NYCâ€™s Zoning &amp; Land Use Map</small>
    </a>
  </div>

  <div class="layer-menu cell large-order-1">
    {{!-- City Map Layers --}}
    {{#accordion-menu title='City Map Layers'}}
      {{#lookup-layer-group for='citymap' as |layerGroup|}}
        {{#layer-menu-item
          title=layerGroup.model.title
          active=citymap}}
        {{/layer-menu-item}}
      {{/lookup-layer-group}}

      {{#lookup-layer-group for='street-centerlines' as |layerGroup|}}
        {{#layer-menu-item
          title=layerGroup.model.title
          active=street-centerlines}}
        {{/layer-menu-item}}
      {{/lookup-layer-group}}

      {{#lookup-layer-group for='pierhead-bulkhead-lines' as |layerGroup|}}
        {{#layer-menu-item
          title=layerGroup.model.title
          active=pierhead-bulkhead-lines}}
        {{/layer-menu-item}}
      {{/lookup-layer-group}}

      {{#lookup-layer-group for='amendments' as |layerGroup|}}
        {{#layer-menu-item
          title=layerGroup.model.title
          active=amendments}}
          {{slider-filter layer=model.amendmentsFill map=map}}
        {{/layer-menu-item}}
      {{/lookup-layer-group}}

      {{#lookup-layer-group for='arterials' as |layerGroup|}}
        {{#layer-menu-item
          title=layerGroup.model.title
          active=arterials}}
        {{/layer-menu-item}}
      {{/lookup-layer-group}}

      {{#lookup-layer-group for='name-changes' as |layerGroup|}}
        {{#layer-menu-item
          title=layerGroup.model.title
          active=name-changes}}
        {{/layer-menu-item}}
      {{/lookup-layer-group}}
    {{/accordion-menu}}

    {{!-- Supporting Layers --}}
    {{#accordion-menu title='Supporting Layers' open=true}}
      {{#lookup-layer-group for='zoning-districts' as |layerGroup|}}
        {{#layer-menu-item
          title=layerGroup.model.title
          active=zoning-districts}}
        {{/layer-menu-item}}
      {{/lookup-layer-group}}

      {{#lookup-layer-group for='commercial-overlays' as |layerGroup|}}
        {{#layer-menu-item
          title=layerGroup.model.title
          active=commercial-overlays}}
        {{/layer-menu-item}}
      {{/lookup-layer-group}}

      {{#lookup-layer-group for='special-purpose-districts' as |layerGroup|}}
        {{#layer-menu-item
          title=layerGroup.model.title
          active=special-purpose-districts}}
        {{/layer-menu-item}}
      {{/lookup-layer-group}}


      {{#lookup-layer-group for='tax-lots' as |layerGroup|}}
        {{#layer-menu-item
          title=layerGroup.model.title
          active=tax-lots}}
        {{/layer-menu-item}}
      {{/lookup-layer-group}}

      {{#lookup-layer-group for='floodplain-pfirm2015' as |layerGroup|}}
        {{#layer-menu-item
          title=layerGroup.model.title
          active=floodplain-pfirm2015}}
        {{/layer-menu-item}}
      {{/lookup-layer-group}}

      {{#lookup-layer-group for='floodplain-efirm2007' as |layerGroup|}}
        {{#layer-menu-item
          title=layerGroup.model.title
          active=floodplain-efirm2007}}
        {{/layer-menu-item}}
      {{/lookup-layer-group}}
    {{/accordion-menu}}
  </div>

  {{outlet}}

</div>
